<!DOCTYPE html>
<html>
<head>
    <title>Clock</title>
    <link rel="stylesheet" type="text/css" href="clock.css">
</head>
<body>
    <div id="clock" class="hidden">02:30</div>
    <script src="socketConfig.js"></script>
    <script src="clock.js"></script>
    <script>
        //socket stuff
        var ws = new WebSocket(host);
        ws.onopen=function() {
            ws.send(JSON.stringify({
                type: "subscribe",
                node: "overlay"
            }));
        };
        ws.onerror=function(e){
            console.log("error", e);
        };
        ws.onmessage=function(d) {
            var data = JSON.parse(d.data);
            console.log(data);
            switch(data.topic) {
                case 'messageBar': setText(data.data[0],data.data[1]); break;
                case 'command': doCommand(data.data); break;
                // case 'time:tick': time.set(data.data); break;
                // case 'time:show': time.show(); break;
                // case 'time:hide': time.hide(); break;
                case 'clock:arm': clock.arm(data.data.countdown); break;
                case 'clock:start': clock.start(null,data.data.countdown); break;
                case 'clock:stop': clock.stop(); break;
            }
        };
        ws.onclose = function() {
            console.log("close");
        };


        
    </script>
</body>
</html>